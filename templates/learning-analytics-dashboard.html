<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Featurepreneur</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">

<link href="{{ url_for('static', filename='css/animate.css') }} " rel="stylesheet">
<link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.3/css/swiper.min.css">

<link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"
    integrity="sha512-rmZcZsyhe0/MAjquhTgiUcb4d9knaFc7b5xAfju483gbEXTkeJRUMIPk6s3ySZMYUHEcjKbjLjyddGWMrNEvZg=="
    crossorigin="anonymous"></script>
   
    <script src="https://momentjs.com/downloads/moment.js"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="{{ url_for('static' , filename = 'heatmap/cal-heatmap-1.0.3.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static' , filename = 'heatmap/cal-heatmap.css' ) }}">

    <!-- CSS FILES -->
    <!-- <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
           integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" /> -->

    <!-- Bootstrap -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet"> -->
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
        .search-bar-container {
            /* background-color: #fff; */
            display: flex;
            padding: 30px 15px 0px;
        }

        #search-box {
            background-color: rgb(255, 255, 255);
            border: 1px solid #ccc;
            width: 100rem;
            margin-bottom: 0;
        }

        #search-btn {
            background-color: #055791;
            color: #fff;
            font-weight: 600;
            margin-left: 20px;
            width: 110px;
        }

        #search-btn:hover {
            background-color: #2a76ac;

        }

        .top-scorers {
            width: auto;
            z-index: 1;
            /* overflow- */
            /* position: absolute; */
            /* margin-left: 9%; */
        }

        .btn-outline-primary {
            border: 2.5px solid #055791;
            font-weight: 600;
        }

        .btn-outline-primary:hover {
            background-color: #055791;
            color: #fff;
        }


        .item_content div {
            padding: 15px 20px 10px;
        }
        .item_recommend .item_content{
            border-radius: 5px;
        }

        .btn-outline-warning{
            border-color: orange !important;
            background-color:#fff;
            color: orange;
            outline: 2px;
        }
        .btn-outline-danger{
            border-color: red !important;
            background-color:#fff;
            color: red;
           
        }
        .logo2{
          width:40%;
          margin-top: -15px;
        }
        /* .p-10 {
                        padding: 10px;
                    } */
                
                    /* .Box {
                        background-color: #fff;
                        border: 1px solid #e1e4e8;
                        border-radius: 6px;
                    } */
                
                    .calendar-heatmap {
                        margin: auto;
                        overflow: visible !important;
                    }
    text
    {
        color: black;
    }

    .breadcrumb > li + li:before {
    color: #ccc;
    content: "| ";
    padding: 0 5px;
}

.suggestions_list{
    height:15px;
    width: 100%;
    background-color: #ccc;
    padding:15px 15px 24px 15px;
}
    </style>
</head>

<body>
    {% if logged_in == True %}

    {% include "top_nav_loggedin.html" %}
  
    {% else %}
    <nav class="navbar navbar-white navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle collapsed"
              data-toggle="collapse"
              data-target="#navbar"
              aria-expanded="false"
              aria-controls="navbar"
            >
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span> <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated fadein" href="#"
              ><img class="logo2" src="{{ url_for('static', filename='img/logo.png') }}" alt="" title=""
            /></a>
          </div>
          <div id="navbar" class="collapse navbar-collapse pull-right">
            <ul class="nav navbar-nav">
              <li>
                <a href="/testimonial" target="_blank">Testimonial</a>
              </li>
              <li>
                <a href="https://tactlabs.gitbook.io/featurepreneur" target="_blank">Docs</a>
              </li>
              <!-- <li >
                <a href="employer-login.html">For Employers</a>
              </li> -->
  
              <li><a href="/login">Log in</a></li>
              <li>
                <a class="btn btn-primary btn-sign" href="/signup"
                  >Sign Up</a
                >
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </nav>
     
      {% endif %}
    



    <section class="inner-pg-dash top-container">
        <div class="container">
            <div class="row">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
                      <li class="breadcrumb-item"><a href="/la/{{username}}/articles">My Links</a></li>
                      <li class="breadcrumb-item"><a href="/la/contributors">Contributors</a></li>
                      <li class="breadcrumb-item"><a href="/learning/partner">Learning Partner</a></li>
                      <li class="breadcrumb-item" style="float: right;"><a href="/la/settings"><i class="fas fa-cog"></i></a></li>

                      

                      <!-- <li class="breadcrumb-item active" aria-current="page">Library</li> -->
                    </ol>
                  </nav>
                  
                <div class="col-sm-12 search-bar-container">
                    <div>
                        <script>
                            // AJAX call for autocomplete 
                            $(document).ready(function(){
                                $("#search-box").keyup(function(){
                                    search_data =  $(this).val()
                                    console.log("res:"+search_data);
                                    if (search_data.length >2 && search_data.length > 0)
                                    {
                                        
                            
                                            $.ajax({
                                    type: "POST",
                                    url: "/la-search",
                                    // data:'keyword='+$(this).val(),
                                    data: search_data,
                                    beforeSend: function(){
                                        $("#search-box").css("background","#FFF url(LoaderIcon.gif) no-repeat 165px");
                                    },
                                    success: function(data){
                                    
                                    console.log("res",data.result);
                                    data = data.result
                                    $("#suggesstion-box").show();
                                    var start = '<ul id="country-list">';
                                    var end = '</ul>'
                                    for(var i = 0; i < data.length; i++)
                                    {
                                        start += '<li class = "suggestions_list" style="background-color:#fff" > <a target="_blank" href="'+data[i].link+'">' + data[i].title + '<hr></a></li>'; // if Name is property of your Person object
                                    }
                                    start+=end
                                        $("#suggesstion-box").html(start);
                                        $("#search-box").css("background","#FFF");
                                        
                                    }
                                    });
                            
                                        
                                    }
                                  
                                });
                            });
                            //To select country name
                            function selectCountry(val) {
                            $("#search-box").val(val);
                            $("#suggesstion-box").hide();
                            }



                            $(document).mouseup(function(e) 
                                {
                                    var container = $("#suggesstion-box");

                                    // if the target of the click isn't the container nor a descendant of the container
                                    if (!container.is(e.target) && container.has(e.target).length === 0) 
                                    {
                                        container.hide();
                                    }
                                });
                                                            
                            </script>
                        <input class="form-control mr-sm-2" id='search-box' tyep="text" placeholder="Search Article"
                            aria-label="Search">
                    </div>
                    <div class="container">
                        <button class="btn btn-outline-success my-2 my-sm-0" id="search-btn" style=" display: inline-block;
                        vertical-align: top;">Search</button>
                        
                        
                        <!-- <div class="dropdown" style="display: inline-block;
                        vertical-align: top;" >
                            <button class="btn  dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Menu
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                              <a class="dropdown-item" href="#">dashboard</a>
                              <a class="dropdown-item" href="/la/contributors">Contributors</a><br>
                              <a class="dropdown-item" href="/la/user-articles">My Links</a>
                            </div>
                          </div> -->
                          
                    </div>

                </div>
                <br>
                <div class="col-sm-12 search-bar-container" id = "suggestions" style="z-index:100;">
                    
                <div id="suggesstion-box" style="overflow: scroll;max-height:500px;width: 100%;" ></div></div>

            </div>
        </div>
        <!-- <a   href ="/la/user-articles">
            <h4 class="">My articles</h4>
            <br>
        </a> -->
    </section>
    
    <section class="inner-pg-dash main-container">

        <div class="container" style="margin-top: 50pxpx;margin: auto;">
            <div class="row" style="  text-align: center;">

                <meta id="contrib-data" data-name="{{ user_id }}">
                <div class="col-md d-flex justify-content-center" id="heat-map"></div>
                <script type="text/javascript">
                    const user = $('#contrib-data').data();
                
                    const runHeatMap = (data) => {
                       
                        console.log(data)
                        var DateContribMap = new Map();
                        data.forEach((dv, index) => {
                            DateContribMap.set(moment(dv.date).endOf('day').toDate().toDateString(), dv.contrib)
                        })
                        var now = moment().endOf('day').toDate();
                        var yearAgo = moment().endOf('day').subtract(1, 'year').toDate();
                
                        var chartData = d3.time.days(yearAgo, now).map(function (dateElement) {
                            let data = {};
                            if (DateContribMap.has(dateElement.toDateString())) { //check if this date is present in the range [yearAgo, now]
                                data.date = dateElement;
                                data.count = DateContribMap.get(dateElement.toDateString())
                            }
                            else {
                                data.date = dateElement;
                                data.count = 0;
                            }
                            return data;
                        });
                        var heatmap = calendarHeatmap()
                            .data(chartData)
                            .selector('#heat-map')
                            .tooltipEnabled(true)
                            .onClick(function (data) {
                                console.log('data', data);
                            });
                        heatmap();
                    }
                    $.ajax({
                        type: "GET",
                        url: "/la/user/get/contributions/{{user_id}}",
                        success: (response) => {
                            console.log("response"+response);
                            runHeatMap(response);
                        }
                    })
                </script>
            </div>
            <div class="row">
                <br><br>
                <div id="recentArticle">
                    <section class="project_pg profile-m-box section">
                        <article class="pro_box">
                            <div class="pro_head">
                                <h3 class="d-flex justify-content-center mt-5" style="padding-left:5rem;">Recently Added
                                    Links</h3>
                            
                        
                            </div>
                        </article>
                       
                    </section>
                    <br><br>
                    <div class="container-xl px-3 px-md-4 px-lg-5 mt-5">
                        <div class="gutter-condensed gutter-lg flex-column flex-md-row d-flex">
                            <div class="flex-shrink-0 col-12  col-md-8 mb-4 mb-md-0">
                                {% if recent_links %}
                                {% for item in recent_links %}
                                    
                                <section class="project_pg profile-m-box section">

                                    <article class="pro_box">

                                        <div class="pro_head">
                                            <div class="p-10 Box my-2">
                                                <a class="p-10"  href ="{{item.link}}"target="_blank">
                                                    <h4 class="p-10">{{item.title}}</h4>
                                                    <br>
                                                </a>
                                                {% if item.user_id == user_id %}
                                                    
                                                <div class="d-flex justify-content-end">
                                                    <p>
                                                        <form action="/la/delete/article" method="POST">
                                                            <input type="hidden" name="title" value="{{item.title}}">
                                                            <input type="hidden" name="created_at" value="{{item.created_at}}"> 
                                                            <div style="padding-left: 46rem; margin-top: 5rem;" >                                                         
                                                            <button type="submit"  style="margin-top:-5rem;  outline: 2px;"class="btn btn-outline-danger" >Delete</button>
                                                        </div>  
                                                            <!-- <a href="/la/make_link_private" style="color:Orange;">Make Private </a> -->
                                                        </form>
                                                            
                                                        <!-- <button type="submit" class="btn btn-outline-success">Make Public</button> -->

                                                        
                                                        {% if not item.isPrivate %}
                                        
                                                        <form action="/la/make_link_private" method="POST">
                                                            <input type="hidden" name="title" value="{{item.title}}">
                                                         
                                                            <button style="margin-top:-9rem; margin-left: 55rem;" type="submit"  class="btn btn-outline-warning">Make Private</button>
                                                       
                                                            <!-- <a href="/la/make_link_private" style="color:Orange;">Make Private </a> -->
                                                        </form>

                                                        


                                                        {% endif %}
                                                        </p>
                                                    </p>
                                                </div>
                                            </div>
                                            {% endif %}


                                            <div class="p-10 Box my-2">
                                                <a class="p-10" target="_blank">
                                                    <h5 class="p-10"></h5>
                                                </a>
                                                <div>
                                                    <p></p>
                                                    <div class="d-flex justify-content-end">
                                                        <p><a>{{item.username}} </a>
                                                        </p>
                                                    </div>
                                                    </div>
                                            </div>
                                        </div>

                                    </article>
                                </section>

                                {% endfor %}
                                {% endif %}

                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md d-flex align-items-center flex-column bd-highlight mb-3">
                    <h4>Top Article Contributors</h4>
                    <div class="container d-flex align-items-start ml-3 flex-column mt-3">


                        <div class="row">

                            <ul class="queue_list queue_list_recommend ">

                                <li class="item item_recommend item_type_recommend col-sm-4 top-scorers">
                                    <div class="item_content" style="background-color:white;">
                                        {% if top_contributors %}
                                        {% for item2 in top_contributors  %}
                                            
                                        <div>
                                            <a class="btn btn-outline-primary" href="/la/profile/{{item2.formatted_username}}">{{item2.username}}
                                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trophy"
                                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd"
                                                        d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935zM3.504 1c.007.517.026 1.006.056 1.469.13 2.028.457 3.546.87 4.667C5.294 9.48 6.484 10 7 10a.5.5 0 0 1 .5.5v2.61a1 1 0 0 1-.757.97l-1.426.356a.5.5 0 0 0-.179.085L4.5 15h7l-.638-.479a.501.501 0 0 0-.18-.085l-1.425-.356a1 1 0 0 1-.757-.97V10.5A.5.5 0 0 1 9 10c.516 0 1.706-.52 2.57-2.864.413-1.12.74-2.64.87-4.667.03-.463.049-.952.056-1.469H3.504z" />
                                                </svg>


                                            </a>
                                            <span class="badge badge-secondary">{{item2.count}}</span>
                                        </div>
                                        {% endfor %}

                                        {% endif %}







                                    </div>
                                </li>
                        </div>
                    </div>
                    </li>
                    </div>
    </section>
    </div>
    </div>
    </div>
    <!-- <footer class="footer inner animated fadeIn">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center copy">
                    <p>Copyright 2017 TalentAccurate.com, Inc. All Rights Reserved</p>
                </div>
            </div>
        </div>
    </footer> -->
    {% include "footer.html" %}   
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <!-- <script src="js/bootstrap.min.js"></script> -->
    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
</body>

</html>